{% extends 'base.html' %}

{% block content %}
<div class="col-md-11 post">
  {% for post in posts %}
    <p>
      <h3><a href={% url "posts_detail" post.slug %}>{{ post.title }}</a></h3>
      <p><i>{{ post.published_on }}</i> by {{ post.author }}</p>
      {% if post.tags.all %}<p>posted in  
        {% for tag in post.tags.all %}
        <a href={% url "posts_tags" tag %}>#{{tag}}</a>{% if not forloop.last %},{% endif%}
        {% endfor %}
      </p>{% endif %}

      <p>{% if post.commit %}Commit: <a href="https://github.com/argaen/djangozone/tree/{{ post.commit }}" target=blank>{{ post.commit }}</a>{% endif %}</p>
      <p>{% if post.branch %}Branch: <a href="https://github.com/argaen/djangozone/tree/{{ post.branch }}" target=blank>{{ post.branch }}</a>{% endif %}</p>
      <p>{% if post.tag %} Tag: <a href={{ post.tag }} target=blank>{{ post.tag }}</a>{% endif %}</p>
    </p>
    <div class="post-content">
      <p>{{ post.content|safe|truncatewords_html:100 }}</p>
    </div>
    <a class="btn btn-primary" href={% url "posts_detail" post.slug %}>Read more</a>
    <hr style="margin-bottom:40px;">
  {% endfor %}

  <div class="paginator">
    {% for p in posts.paginator.page_range %} 
      <a class="btn btn-primary {% ifequal p posts.number %}btn-success{% endifequal %} btn-sm" href="?page={{ p }}">{{p}}</a>
    {% endfor %}
  </div>

</div>
{% endblock %}
